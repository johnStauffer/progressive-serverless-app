!(function(e,t){"function"==typeof define&&define.amd?define([],(function(){return t(e)})):"object"==typeof exports?module.exports=t(e):window.atomic=t(e)})("undefined"!=typeof global?global:"undefined"!=typeof window?window:this,(function(n){"use strict";var s,o={method:"GET",username:null,password:null,data:{},headers:{"Content-type":"application/x-www-form-urlencoded"},responseType:"text",timeout:null,withCredentials:!1},r=function(){for(var n={},e=function(e){for(var t in e)e.hasOwnProperty(t)&&("[object Object]"===Object.prototype.toString.call(e[t])?n[t]=r(n[t],e[t]):n[t]=e[t])},t=0;t<arguments.length;t++)e(arguments[t]);return n};return function(e,t){if(!("XMLHttpRequest"in n&&"JSON"in n&&"Promise"in n))throw"Atomic: This browser does not support the methods used in this plugin.";return s=r(o,t||{}),(function(o){var r=new XMLHttpRequest,e=new Promise(function(e,t){for(var n in r.onreadystatechange=function(){4===r.readyState&&(200<=r.status&&r.status<300?e(function(t){var n;if("text"!==s.responseType&&""!==s.responseType)return{data:t.response,xhr:t};try{n=JSON.parse(t.responseText)}catch(e){n=t.responseText}return{data:n,xhr:t}}(r)):t({status:r.status,statusText:r.statusText,responseText:r.responseText}))},r.open(s.method,o,!0,s.username,s.password),r.responseType=s.responseType,s.headers)s.headers.hasOwnProperty(n)&&r.setRequestHeader(n,s.headers[n]);s.timeout&&(r.timeout=s.timeout,r.ontimeout=function(e){t({status:408,statusText:"Request timeout"})}),s.withCredentials&&(r.withCredentials=!0),r.send(function(e){if("string"==typeof e||"[object FormData]"===Object.prototype.toString.call(e))return e;if(/application\/json/i.test(s.headers["Content-type"])||"[object Array]"===Object.prototype.toString.call(e))return JSON.stringify(e);var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t.join("&")}(s.data))});return e.cancel=function(){r.abort()},e})(e)}}));